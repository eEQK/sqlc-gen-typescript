// Code generated by sqlc. DO NOT EDIT.

import { QueryArrayConfig, QueryArrayResult } from "pg";

interface Client {
    query: (config: QueryArrayConfig) => Promise<QueryArrayResult>;
}

export module Authors {
    const getAuthorQuery = `-- name: Authors_GetAuthor :one
SELECT id, name, bio FROM authors
WHERE id = $1 LIMIT 1`;
    export interface GetAuthorArgs {
        id: string;
    }
    export interface GetAuthorRow {
        id: string;
        name: string;
        bio: string | null;
    }
    export async function getAuthor(client: Client, args: GetAuthorArgs): Promise<GetAuthorRow | null> {
        const result = await client.query({
            text: getAuthorQuery,
            values: [args.id],
            rowMode: "array"
        });
        if (result.rows.length !== 1) {
            return null;
        }
        const row = result.rows[0];
        return {
            id: row[0],
            name: row[1],
            bio: row[2]
        };
    }
    const listAuthorsQuery = `-- name: Authors_ListAuthors :many
SELECT id, name, bio FROM authors
ORDER BY name`;
    export interface ListAuthorsRow {
        id: string;
        name: string;
        bio: string | null;
    }
    export async function listAuthors(client: Client): Promise<ListAuthorsRow[]> {
        const result = await client.query({
            text: listAuthorsQuery,
            values: [],
            rowMode: "array"
        });
        return result.rows.map(row => {
            return {
                id: row[0],
                name: row[1],
                bio: row[2]
            };
        });
    }
    const createAuthorQuery = `-- name: Authors_CreateAuthor :one
INSERT INTO authors (
  name, bio
) VALUES (
  $1, $2
)
RETURNING id, name, bio`;
    export interface CreateAuthorArgs {
        name: string;
        bio: string | null;
    }
    export interface CreateAuthorRow {
        id: string;
        name: string;
        bio: string | null;
    }
    export async function createAuthor(client: Client, args: CreateAuthorArgs): Promise<CreateAuthorRow | null> {
        const result = await client.query({
            text: createAuthorQuery,
            values: [args.name, args.bio],
            rowMode: "array"
        });
        if (result.rows.length !== 1) {
            return null;
        }
        const row = result.rows[0];
        return {
            id: row[0],
            name: row[1],
            bio: row[2]
        };
    }
    const deleteAuthorQuery = `-- name: Authors_DeleteAuthor :exec
DELETE FROM authors
WHERE id = $1`;
    export interface DeleteAuthorArgs {
        id: string;
    }
    export async function deleteAuthor(client: Client, args: DeleteAuthorArgs): Promise<void> {
        await client.query({
            text: deleteAuthorQuery,
            values: [args.id],
            rowMode: "array"
        });
    }
    export module Nested {
        const listQuery = `-- name: Authors_Nested_List :many
SELECT id, name, bio FROM authors
ORDER BY name`;
        export interface ListRow {
            id: string;
            name: string;
            bio: string | null;
        }
        export async function list(client: Client): Promise<ListRow[]> {
            const result = await client.query({
                text: listQuery,
                values: [],
                rowMode: "array"
            });
            return result.rows.map(row => {
                return {
                    id: row[0],
                    name: row[1],
                    bio: row[2]
                };
            });
        }
    }
}

